@using CottageFinder.Models

<MudCard Class="cottage-card-component" Elevation="2">
    @if (!string.IsNullOrEmpty(Cottage.PictureUrl))
    {
        <MudCardMedia Image="@Cottage.PictureUrl" Height="200" />
    }
    else
    {
        <div class="cottage-card-no-image">
            <MudIcon Icon="@Icons.Material.Filled.Cottage" Size="Size.Large" Color="Color.Default" />
            <MudText Typo="Typo.caption">No Image Available</MudText>
        </div>
    }

    <MudCardContent>
        <MudText Typo="Typo.h6" Class="cottage-card-title">@Cottage.Name</MudText>
        <div class="cottage-card-info-row">
            <MudIcon Icon="@Icons.Material.Filled.LocationOn" Size="Size.Small" Color="Color.Secondary" />
            <MudText Typo="Typo.body2" Color="Color.Secondary">@Cottage.Town</MudText>
        </div>
        <div class="cottage-card-info-row">
            <MudIcon Icon="@Icons.Material.Filled.Bed" Size="Size.Small" />
            <MudText Typo="Typo.body2">@Cottage.SleepsText</MudText>
        </div>
        @if (!string.IsNullOrEmpty(Cottage.Rent))
        {
            <MudText Typo="Typo.body2" Color="Color.Primary" Class="mt-2 cottage-price-text">
                <strong>@Cottage.Rent</strong>
            </MudText>
        }
    </MudCardContent>

    <MudCardActions>
        <MudButton Variant="Variant.Text"
                   Color="Color.Primary"
                   FullWidth="true"
                   OnClick="HandleClick">
            View Details
        </MudButton>
    </MudCardActions>
</MudCard>

@code {
    [Parameter, EditorRequired]
    public Cottage Cottage { get; set; } = null!;

    [Parameter]
    public EventCallback<int> OnCottageSelected { get; set; }

    private async Task HandleClick()
    {
        await OnCottageSelected.InvokeAsync(Cottage.Code);
    }
}
